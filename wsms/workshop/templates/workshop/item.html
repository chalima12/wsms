
{% extends "./base1.html" %}
  {% include 'workshop/Add_assignment.html' %}
  
  {% block title %}
    <title>Item List </title>
  {% endblock title %} 
    



  
{% block content %}




    <!-- Content Wrapper. Contains page content -->
<div class="content-wrapper">
  <div class="container mt-1"> 
       
    {% if messages %}
    <ul class="messages alert-danger float-right">
    {% for message in messages %}
    <li style='List-style:none' class="{{ message.tags }}">{{ message }}</li>
    {% endfor %}
    </ul>
    {% endif %}
    
    <a class="btn btn-warning" href="{% url 'workshop:create-item' %}">
  
        <span class="fa fa-plus">
         &nbsp;&nbsp; Add Item
        </span>
      </a>
    </div>
            <div class="card m-3">
              <div class="card-header">
                <h2 class="container mx-5 card-title">List of Items</h2>
              </div>
              <!-- /.card-header -->
              <div class="card-body">
                <table id="example1" class="table table-bordered table-striped">
                
                      <thead class="dataTables_info">
                        <tr>
                          <th>ID</th>
                          <th>Received Date</th>
                          <th>Stock Id</th>
                          <th>Serial Number</th>
                          <th>Status</th>
                          <th>Acceped</th>
                          <th>Action</th>
                        </tr>
                      </thead>
                      <tbody>
                       
                        {% for data in items %}
                        <tr>
                          <td>{{data.id}}</td>
                        <td> {{data.received_date}}</td>
                        <td>{{data.stock_id}}</td>
                        <td>{{data.Serial_no}}</td>
                        <td>{{data.status}}</td>
                        <td>{{data.is_accepted}}</td>
                        <td >
                          <a style='border-radius:10%'  class="btn btn-info btn-sm btn " 
                        href='{% url "workshop:item_detail" data.id%}' > <span class="fas fa-eye ">Item</span></a>
                        
                          {% if data.status == 'pending' %}
                          <a class='btn btn-secondary btn-sm' 
                           style='border-radius:10%' href="{% url 'workshop:create-assignment' data.id %}">
                          <span class="fa fa-address-book">
                          Assign
                          </span>
                          </a>
                          {% else %}
                          <a class='btn btn-secondary btn-sm btn disabled' style='border-radius:10%' href="#">
                          <span class="fa fa-address-book">
                          Assigned
                          </span>
                          </a>
                          {% endif %}
                      
                          
                        <a style='border-radius:10%' class="btn btn-danger btn-sm" href="javascript:void(0)"
                        data-toggle="modal"
                        class="confirm-accept"
                        data-url="{% url 'workshop:item_delete' data.id %}"

                        data-target="#acceptItemModal"
                        data-message="Are you Sure to delete {{data.Serial_no}}  ?">
                        <i class="far fa-trash-alt"></i>
                        <span>Delete</span></a>
                        </td>
                        </tr>
                        {% endfor %}
                        
                      </tbody>
                    </table>
              </div>
              <!-- /.card-body -->
            </div>
            <!-- /.card -->
          </div>
          <!-- /.col -->
        </div>
        <!-- /.row -->
      </div>
    </div>  
      {% if messages.warning %}
      <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
      <script>
        // create a modal popup with the warning message
        Swal.fire(
          icon: 'warning',
          title: 'Warning',
          text: '{{ messages.warning }}',
          confirmButtonText: 'Close'
        );
      </script>
    {% endif %}
    
{% endblock content %}
    

