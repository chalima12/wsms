<!-- workshop/report.html -->

{% extends "./base1.html" %}
{% load static %}
{% block title %}
<title>Report</title>
{% endblock title %}

{% block content %}
<!-- Content Wrapper. Contains page content -->
<div class="content-wrapper">
  <!-- Content Header (Page header) -->
  <section class="content-header">
    <div class="container-fluid">
      <div class="row mb-2">
        <div class="col-sm-6">
          <h1>{% if time_range == "daily" %}Daily Report{% endif %}</h1>
          <h1>{% if time_range == "weekly" %}Weekly Report{% endif %}</h1>
          <h1>{% if time_range == "monthly" %}Monthly Report{% endif %}</h1>
        </div>
        <div class="col-sm-6">
          <!-- Add a form or links to allow users to select the time range -->
          <form method="get" class="float-right">
            <label for="time_range">Select Time Range: </label>
            <select name="time_range" id="time_range">
              <option value="daily" {% if time_range == "daily" %}selected{% endif %}>Daily</option>
              <option value="weekly" {% if time_range == "weekly" %}selected{% endif %}>Weekly</option>
              <option value="monthly" {% if time_range == "monthly" %}selected{% endif %}>Monthly</option>
            </select>
            <button type="submit">Apply</button>
          </form>
        </div>
      </div>
    </div>
    <!-- /.container-fluid -->
  </section>

  <!-- Main content -->
  <section class="content">
    <!-- Your existing content -->
<div class="container-fluid">
  <div class="row">
    <div class="col-12">
      <div class="card">
        <div class="card-body">
          <table id="example1" class="table table-bordered table-striped">
            <thead class="dataTables_info">
              <tr>
                <th>#</th>
                <th>Workshop Id</th>
                <th>Received Date</th>
                <th>Stock Id</th>
                <th>Serial Number</th>
                <th>Delivered By</th>
                <th>Received By</th>
                <th>Maintained Date</th>
                <th>Maintained By</th>
                <th>Components</th>
                <th>Received Item Issue</th>
                <th>Delivered Item Issue</th>
                <th>Is Maintainable</th>
              </tr>
            </thead>
            <tbody>
              {% for assignment in assignments %}
              <tr>
                <td>{{ forloop.counter }}</td>
                <td>{{ assignment.item.ws_id }}</td>
                <td>{{ assignment.item.received_date }}</td>
                <td>{{ assignment.item.stock_id }}</td>
                <td>{{ assignment.item.Serial_no }}</td>
                <td>{{ assignment.item.delivered_by }}</td>
                <td>{{ assignment.item.received_by }}</td>
                <td>{{ assignment.completed_date }}</td>
                <td>{{ assignment.engineer }}</td>
                <td>
                  <ul>
                      {% for component in assignment.item.components.all %}
                          <li style='list-style:none'>{{ component.Serial_no }}</li><br>
                      {% endfor %}
                  </ul>
              </td>              
              <td>{{ assignment.item.remark }}</td>
                <td>{{ assignment.item.comment }}</td>
                <td>{{ assignment.item.is_maintainable }}</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
        <!-- /.card-body -->
      </div>
      <!-- /.card -->
    </div>
    <!-- /.col -->
  </div>
  <!-- /.row -->
</div>
<!-- /.container-fluid -->
</section>
<!-- /.content -->
</div>
<!-- /.content-wrapper -->
{% endblock content %}

  </section>
  <!-- /.content -->
</div>
<!-- /.content-wrapper -->

